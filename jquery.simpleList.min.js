!function(e){e.fn.simpleList=function(t){function l(t,l){var i=e("#"+t+" .sl-selected");i.length>0&&(selectedElement=i.clone(!0),e("#"+l).append(selectedElement),e(i).detach())}function i(t,l){var t=e("#"+t+" .sl-selected");n(t,l)}function n(t,l){if(t.length>0){elValue=t.attr(v);var i=JSON.parse(e("[name="+l+"]").val());-1==i.indexOf(elValue)&&i.push(elValue),e("[name="+l+"]").val(JSON.stringify(i))}}function a(t,l){var i=e("#"+t+" > li");i.length>0&&i.each(function(){e("#"+l).append(e(this).clone(!0)),e(this).detach()})}function s(t,l){var i=e("#"+t+" > li");i.length>0&&i.each(function(){n(e(this),l)})}function r(t,l){var i=JSON.parse(e("[name="+l+"]").val());if(i.length>0){var n=i.indexOf(t.attr(v));i.splice(n,1),e("[name="+l+"]").val(JSON.stringify(i))}}function d(t){e("[name="+t+"]").val("[]")}var c=e.extend({valueAttribute:"value"}),o=e.extend({},c,t),u=e(this).attr("id")+"_selected",v=o.valueAttribute;if(e("#"+u).length>0){e("#"+e(this).attr("id")+"_remove_all").click();var h=e("[parentID="+e(this).attr("id")+"]"),m=e(h).attr("name");e(this).attr("name",m);var p=e(this).clone(!0),f=e("#"+u).closest("table");e(p).insertAfter(f),e(f).empty().remove(),e(h).empty().remove(),e("#"+e(this).attr("id")).simpleList(t)}var _=e(this).attr("name"),g=e(this).attr("id"),b="<input type='hidden' parentID='"+g+"' name='"+_+"' value='[]' />";e(this).removeAttr("name");var y=e(this).clone(!0).empty().attr("id",u).get(0).outerHTML,k="<table><tr><td>"+e(this).get(0).outerHTML+"</td><td><input type='button' value='>' id='"+e(this).attr("id")+"_add_single' /><br /><input type='button' value='>>' id='"+e(this).attr("id")+"_add_all' /><br /><input type='button' value='<' id='"+e(this).attr("id")+"_remove_single' /><br /><input type='button' value='<<' id='"+e(this).attr("id")+"_remove_all' /></td><td>"+y+"</td></tr></table>";k+=b,e(this).replaceWith(k),e("#"+g+" > li, #"+u+" > li").on("click",function(){e("#"+g+" > li, #"+u+" > li").removeClass("sl-selected"),e(this).addClass("sl-selected")}),e("#"+g+"_add_single").on("click",function(){i(g,_),l(g,u),e(".sl-selected").removeClass("sl-selected")}),e("#"+g+"_add_all").on("click",function(){s(g,_),a(g,u),e(".sl-selected").removeClass("sl-selected")}),e("#"+g+"_remove_single").on("click",function(){var t=e("#"+u+" [selected=selected]");r(t,_),l(u,g),e(".sl-selected").removeClass("sl-selected")}),e("#"+g+"_remove_all").on("click",function(){d(_),a(u,g),e(".sl-selected").removeClass("sl-selected")})}}(jQuery);